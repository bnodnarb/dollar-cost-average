<!--

ABOUT:
- We believe in the ethos of verification
- This HTML script can run in any modern browser

VERIFICATION:
- This HTML script uses a popular open source project called Forge to sign Binance trades with your Secret API Key: https://github.com/digitalbazaar/forge
- We are using Forge v7.0, which the most widely adopted version of Forge: https://cdn.jsdelivr.net/npm/node-forge@0.7.0/dist/forge.min.js
- To verify the authenticity of the Forge cryptography utilities contained in this script (lines 17-26), we recommend running a SHA256 checksum (details below)
- SHA256 Checksum: 4b4f042f9ea6c72a580e93b7922b1ff89f2c1fca28a5843ab473db79cd74d1a7

-->

<script src="forge.min.js"></script>

<script>

  function generateSignedOrders() {

    api_key = document.getElementById('api_key').value;
    secret = document.getElementById('api_secret').value;

    orders = JSON.parse(document.getElementById('orders').value);
    signed_orders = {};
    var ordersLength = orders.length;
    for (var i = 0; i < ordersLength; i++) {
      var order = orders[i];
      var params = {
          symbol: order.symbol,
          side: 'BUY',
          type: 'MARKET',
          quantity: order.quantity,
          recvWindow: 60000,
          timestamp: Math.floor(Date.now() / 1000) * 1000
      };

      queryString = Object.keys(params).map(function(k) {
          return encodeURIComponent(k) + '=' + encodeURIComponent(params[k])
      }).join('&')

      var hmac = forge.hmac.create();
      hmac.start('sha256', secret);
      hmac.update(queryString);
      signature = hmac.digest().toHex();

      const url = queryString + "&signature=" + signature + "&api_key=" + api_key;

      orders[i].signedOrder = url;
    }
    console.log(orders);
    document.getElementById("signed_orders").innerHTML = '<pre>' + JSON.stringify(orders,null,2) + '</pre>';
  }

</script>

<style>
  input, button, select {
    width: 250px;
    height: 30px;
  }
</style>

<p><input type="password" id="api_key" placeholder="Binance API Key"> <i>Your Binance API Key</i></p>
<p><input type="password" id="api_secret" placeholder="Binance API Secret"> <i>Your Binance API Secret Key</i></p>
<p><textarea name="orders" id="orders" placeholder="Orders" rows="25" cols="80"></textarea></p>
<p><button id="generate_signed_orders" onclick="generateSignedOrders();">Generate Signed Orders</button></p>
<p><div id="signed_orders"></div></p>
